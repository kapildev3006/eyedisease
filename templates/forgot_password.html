<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forgot Password - EyeCare AI</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="d-flex align-items-center justify-content-center" style="min-height: 100vh; background: linear-gradient(135deg, #e0f2fe 0%, #93c5fd 50%, #1e40af 100%);">
  <div class="login-container card shadow-lg p-4 animate__animated animate__fadeInDown" style="max-width: 400px; width: 100%; border-radius: 1.5rem; background: rgba(255,255,255,0.95);">
    <div class="text-center mb-3">
      <span class="d-inline-block bg-primary bg-gradient p-3 rounded-circle mb-2 animate__animated animate__zoomIn"><i class="bi bi-unlock text-white fs-1"></i></span>
      <h2 class="fw-bold mb-2" style="color: #2563eb;">Forgot Password</h2>
    </div>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    <form method="POST" action="{{ url_for('forgot_password') }}">
      <div class="mb-3 animate__animated animate__fadeInLeft">
        <input type="text" name="email_or_mobile" class="form-control form-control-lg" placeholder="Email or Mobile Number" required />
      </div>
      <div class="text-end mt-2">
        <button type="button" class="btn btn-outline-primary btn-sm" id="send-otp-btn">Send OTP</button>
      </div>
      <div id="otp-section" class="mt-3 d-none">
        <input type="text" name="otp" class="form-control form-control-lg mb-2" placeholder="Enter OTP" />
        <input type="password" name="new_password" class="form-control form-control-lg mb-2" placeholder="New Password" />
        <div class="text-danger small" id="otp-error"></div>
      </div>
      <div class="d-grid animate__animated animate__fadeInLeft mt-3">
        <button type="submit" class="btn btn-primary btn-lg">Reset Password</button>
      </div>
    </form>
    <div class="link text-center mt-3 animate__animated animate__fadeInLeft">
      Remembered? <a href="{{ url_for('login') }}">Login</a>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Show OTP input when 'Send OTP' is clicked (UI only)
    document.getElementById('send-otp-btn').onclick = function() {
      document.getElementById('otp-section').classList.remove('d-none');
      this.disabled = true;
      this.textContent = 'OTP Sent';
    };
  </script>
</body>
</html>
