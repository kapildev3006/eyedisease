<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Register - EyeCare AI</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  </head>
  <body class="d-flex align-items-center justify-content-center" style="min-height: 100vh; background: linear-gradient(135deg, #e0f2fe 0%, #93c5fd 50%, #1e40af 100%);">
    <div class="register-container card shadow-lg p-4 animate__animated animate__fadeInDown" style="max-width: 400px; width: 100%; border-radius: 1.5rem; background: rgba(255,255,255,0.95);">
      <div class="text-center mb-3">
        <span class="d-inline-block bg-primary bg-gradient p-3 rounded-circle mb-2 animate__animated animate__zoomIn"><i class="bi bi-person-plus text-white fs-1"></i></span>
        <h2 class="fw-bold mb-2" style="color: #2563eb;">Create Account</h2>
      </div>
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div class="container mt-3">
          {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {% endfor %}
      </div>
      {% endif %}
      {% endwith %}
      <form method="POST" action="{{ url_for('register') }}">
        <div class="mb-3 animate__animated animate__fadeInLeft">
          <input type="text" name="name" class="form-control form-control-lg" placeholder="Full Name" required />
        </div>
        <div class="mb-3 animate__animated animate__fadeInLeft">
          <input type="email" name="email" class="form-control form-control-lg" placeholder="Email" required />
          <div class="text-end mt-2">
            <button type="button" class="btn btn-outline-primary btn-sm" id="send-otp-btn">Verify by OTP</button>
          </div>
          <div id="otp-section" class="mt-3 d-none">
            <input type="text" name="otp" class="form-control form-control-lg mb-2" placeholder="Enter OTP" />
            <div class="text-danger small" id="otp-error"></div>
          </div>
        </div>
        <div class="mb-3 animate__animated animate__fadeInLeft">
          <input type="text" name="mobile" class="form-control form-control-lg" placeholder="Mobile Number" pattern="[0-9]{10}" maxlength="10" required />
        </div>
        <div class="mb-3 animate__animated animate__fadeInLeft">
          <input type="password" name="password" class="form-control form-control-lg" placeholder="Password" required />
        </div>
        <div class="d-grid animate__animated animate__fadeInLeft">
          <button type="submit" class="btn btn-primary btn-lg">Register</button>
        </div>
      </form>
      <div class="link text-center mt-3 animate__animated animate__fadeInLeft">
        Already have an account? <a href="{{ url_for('login') }}">Login</a>
      </div>
    </div>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Show OTP input when 'Verify by OTP' is clicked (UI only)
      document.getElementById('send-otp-btn').onclick = function() {
        document.getElementById('otp-section').classList.remove('d-none');
        this.disabled = true;
        this.textContent = 'OTP Sent';
      };
    </script>
    <style>
    body.dark-mode {
      background: linear-gradient(135deg, #181c24 0%, #232946 100%) !important;
      color: #f1f5f9 !important;
    }
    body.dark-mode .register-container.card {
      background: rgba(24,28,36,0.98) !important;
      color: #f1f5f9 !important;
      box-shadow: 0 4px 32px rgba(16,24,39,0.18);
    }
    body.dark-mode h2,
    body.dark-mode .bi-person-plus {
      color: #93c5fd !important;
    }
    body.dark-mode .btn-primary {
      background: linear-gradient(90deg, #232946 0%, #667eea 100%) !important;
      border-color: #232946 !important;
    }
    body.dark-mode .btn-outline-primary {
      color: #93c5fd !important;
      border-color: #93c5fd !important;
    }
    body.dark-mode .btn-outline-primary:hover {
      background: #232946 !important;
    }
    body.dark-mode .alert {
      background: #232946 !important;
      color: #93c5fd !important;
    }
    </style>
  </body>
</html>